GAS LISTING /tmp/ccqN2teK.s 			page 1


   1               		.file	"USART.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.stabs	"/home/ffg/DATA/Electronics/AVR/PSU/",100,0,2,.Ltext0
   8               		.stabs	"USART.c",100,0,2,.Ltext0
   9               		.text
  10               	.Ltext0:
  11               		.stabs	"gcc2_compiled.",60,0,0,0
  12               		.stabs	"int:t(0,1)=r(0,1);-32768;32767;",128,0,0,0
  13               		.stabs	"char:t(0,2)=@s8;r(0,2);0;255;",128,0,0,0
  14               		.stabs	"long int:t(0,3)=@s32;r(0,3);020000000000;017777777777;",128,0,0,0
  15               		.stabs	"unsigned int:t(0,4)=r(0,4);0;0177777;",128,0,0,0
  16               		.stabs	"long unsigned int:t(0,5)=@s32;r(0,5);0;037777777777;",128,0,0,0
  17               		.stabs	"long long int:t(0,6)=@s64;r(0,6);01000000000000000000000;0777777777777777777777;",128,0,0,
  18               		.stabs	"long long unsigned int:t(0,7)=@s64;r(0,7);0;01777777777777777777777;",128,0,0,0
  19               		.stabs	"short int:t(0,8)=r(0,8);-32768;32767;",128,0,0,0
  20               		.stabs	"short unsigned int:t(0,9)=r(0,9);0;0177777;",128,0,0,0
  21               		.stabs	"signed char:t(0,10)=@s8;r(0,10);-128;127;",128,0,0,0
  22               		.stabs	"unsigned char:t(0,11)=@s8;r(0,11);0;255;",128,0,0,0
  23               		.stabs	"float:t(0,12)=r(0,1);4;0;",128,0,0,0
  24               		.stabs	"double:t(0,13)=r(0,1);4;0;",128,0,0,0
  25               		.stabs	"long double:t(0,14)=r(0,1);4;0;",128,0,0,0
  26               		.stabs	"void:t(0,15)=(0,15)",128,0,0,0
  27               		.stabs	"USART.h",130,0,0,0
  28               		.stabs	"/usr/lib/gcc/avr/4.7.2/../../../avr/include/avr/io.h",130,0,0,0
  29               		.stabs	"/usr/lib/gcc/avr/4.7.2/../../../avr/include/avr/sfr_defs.h",130,0,0,0
  30               		.stabs	"/usr/lib/gcc/avr/4.7.2/../../../avr/include/inttypes.h",130,0,0,0
  31               		.stabs	"/usr/lib/gcc/avr/4.7.2/include/stdint.h",130,0,0,0
  32               		.stabs	"/usr/lib/gcc/avr/4.7.2/../../../avr/include/stdint.h",130,0,0,0
  33               		.stabs	"int8_t:t(6,1)=(0,10)",128,0,121,0
  34               		.stabs	"uint8_t:t(6,2)=(0,11)",128,0,122,0
  35               		.stabs	"int16_t:t(6,3)=(0,1)",128,0,123,0
  36               		.stabs	"uint16_t:t(6,4)=(0,4)",128,0,124,0
  37               		.stabs	"int32_t:t(6,5)=(0,3)",128,0,125,0
  38               		.stabs	"uint32_t:t(6,6)=(0,5)",128,0,126,0
  39               		.stabs	"int64_t:t(6,7)=(0,6)",128,0,128,0
  40               		.stabs	"uint64_t:t(6,8)=(0,7)",128,0,129,0
  41               		.stabs	"intptr_t:t(6,9)=(6,3)",128,0,142,0
  42               		.stabs	"uintptr_t:t(6,10)=(6,4)",128,0,147,0
  43               		.stabs	"int_least8_t:t(6,11)=(6,1)",128,0,159,0
  44               		.stabs	"uint_least8_t:t(6,12)=(6,2)",128,0,164,0
  45               		.stabs	"int_least16_t:t(6,13)=(6,3)",128,0,169,0
  46               		.stabs	"uint_least16_t:t(6,14)=(6,4)",128,0,174,0
  47               		.stabs	"int_least32_t:t(6,15)=(6,5)",128,0,179,0
  48               		.stabs	"uint_least32_t:t(6,16)=(6,6)",128,0,184,0
  49               		.stabs	"int_least64_t:t(6,17)=(6,7)",128,0,192,0
  50               		.stabs	"uint_least64_t:t(6,18)=(6,8)",128,0,199,0
  51               		.stabs	"int_fast8_t:t(6,19)=(6,1)",128,0,213,0
  52               		.stabs	"uint_fast8_t:t(6,20)=(6,2)",128,0,218,0
  53               		.stabs	"int_fast16_t:t(6,21)=(6,3)",128,0,223,0
  54               		.stabs	"uint_fast16_t:t(6,22)=(6,4)",128,0,228,0
  55               		.stabs	"int_fast32_t:t(6,23)=(6,5)",128,0,233,0
  56               		.stabs	"uint_fast32_t:t(6,24)=(6,6)",128,0,238,0
  57               		.stabs	"int_fast64_t:t(6,25)=(6,7)",128,0,246,0
GAS LISTING /tmp/ccqN2teK.s 			page 2


  58               		.stabs	"uint_fast64_t:t(6,26)=(6,8)",128,0,253,0
  59               		.stabs	"intmax_t:t(6,27)=(6,7)",128,0,273,0
  60               		.stabs	"uintmax_t:t(6,28)=(6,8)",128,0,278,0
  61               		.stabn	162,0,0,0
  62               		.stabn	162,0,0,0
  63               		.stabs	"int_farptr_t:t(4,1)=(6,5)",128,0,77,0
  64               		.stabs	"uint_farptr_t:t(4,2)=(6,6)",128,0,81,0
  65               		.stabn	162,0,0,0
  66               		.stabn	162,0,0,0
  67               		.stabs	"/usr/lib/gcc/avr/4.7.2/../../../avr/include/avr/fuse.h",130,0,0,0
  68               		.stabs	"__fuse_t:t(7,1)=(7,2)=s2low:(0,11),0,8;high:(0,11),8,8;;",128,0,252,0
  69               		.stabn	162,0,0,0
  70               		.stabn	162,0,0,0
  71               		.stabs	"/usr/lib/gcc/avr/4.7.2/../../../avr/include/stdio.h",130,0,0,0
  72               		.stabs	"/usr/lib/gcc/avr/4.7.2/include/stdarg.h",130,0,0,0
  73               		.stabs	"__gnuc_va_list:t(9,1)=(9,2)=*(0,15)",128,0,40,0
  74               		.stabs	"va_list:t(9,3)=(9,1)",128,0,102,0
  75               		.stabn	162,0,0,0
  76               		.stabs	"/usr/lib/gcc/avr/4.7.2/include/stddef.h",130,0,0,0
  77               		.stabs	"size_t:t(10,1)=(0,4)",128,0,213,0
  78               		.stabn	162,0,0,0
  79               		.stabs	"__file:T(8,1)=s14buf:(8,2)=*(0,2),0,16;unget:(0,11),16,8;flags:(6,2),24,8;size:(0,1),32,16
  80               		.stabn	162,0,0,0
  81               		.stabn	162,0,0,0
  82               		.stabs	"USART_Initialize:F(0,15)",36,0,3,USART_Initialize
  83               	.global	USART_Initialize
  84               		.type	USART_Initialize, @function
  85               	USART_Initialize:
  86               		.stabd	46,0,0
   1:USART.c       **** #include "USART.h"
   2:USART.c       **** 
   3:USART.c       **** void USART_Initialize(void)
   4:USART.c       **** {
  87               		.stabn	68,0,4,.LM0-.LFBB1
  88               	.LM0:
  89               	.LFBB1:
  90               	/* prologue: function */
  91               	/* frame size = 0 */
  92               	/* stack size = 0 */
  93               	.L__stack_usage = 0
   5:USART.c       **** 	// Set BAUD rate
   6:USART.c       **** 	UBRRH = (unsigned char)(MYUBRR>>8);
  94               		.stabn	68,0,6,.LM1-.LFBB1
  95               	.LM1:
  96 0000 10BC      		out 0x20,__zero_reg__
   7:USART.c       **** 	UBRRL = (unsigned char) MYUBRR;
  97               		.stabn	68,0,7,.LM2-.LFBB1
  98               	.LM2:
  99 0002 87E6      		ldi r24,lo8(103)
 100 0004 89B9      		out 0x9,r24
   8:USART.c       **** 
   9:USART.c       **** 	// Enable reciever and transmitter
  10:USART.c       **** 	UCSRB = (1 << RXEN) | (1 << TXEN);
 101               		.stabn	68,0,10,.LM3-.LFBB1
 102               	.LM3:
 103 0006 88E1      		ldi r24,lo8(24)
 104 0008 8AB9      		out 0xa,r24
GAS LISTING /tmp/ccqN2teK.s 			page 3


  11:USART.c       **** 	// Set frame format: 8data, 2stop bit
  12:USART.c       **** 	UCSRC = (1<<URSEL) | (1<<USBS) | (3<<UCSZ0);
 105               		.stabn	68,0,12,.LM4-.LFBB1
 106               	.LM4:
 107 000a 8EE8      		ldi r24,lo8(-114)
 108 000c 80BD      		out 0x20,r24
 109 000e 0895      		ret
 110               		.size	USART_Initialize, .-USART_Initialize
 111               	.Lscope1:
 112               		.stabs	"",36,0,0,.Lscope1-.LFBB1
 113               		.stabd	78,0,0
 114               		.stabs	"USART_TransmitChar:F(0,15)",36,0,15,USART_TransmitChar
 115               		.stabs	"data:P(0,11)",64,0,15,24
 116               	.global	USART_TransmitChar
 117               		.type	USART_TransmitChar, @function
 118               	USART_TransmitChar:
 119               		.stabd	46,0,0
  13:USART.c       **** }
  14:USART.c       **** 
  15:USART.c       **** void USART_TransmitChar(unsigned char data)
  16:USART.c       **** {
 120               		.stabn	68,0,16,.LM5-.LFBB2
 121               	.LM5:
 122               	.LFBB2:
 123               	/* prologue: function */
 124               	/* frame size = 0 */
 125               	/* stack size = 0 */
 126               	.L__stack_usage = 0
 127               	.L3:
  17:USART.c       **** 	// Wait for empty transmit buffer
  18:USART.c       **** 	while ( !(UCSRA & (1<<UDRE)) );
 128               		.stabn	68,0,18,.LM6-.LFBB2
 129               	.LM6:
 130 0010 5D9B      		sbis 0xb,5
 131 0012 00C0      		rjmp .L3
  19:USART.c       **** 	// Put the data into buffer
  20:USART.c       **** 	UDR = data;
 132               		.stabn	68,0,20,.LM7-.LFBB2
 133               	.LM7:
 134 0014 8CB9      		out 0xc,r24
 135 0016 0895      		ret
 136               		.size	USART_TransmitChar, .-USART_TransmitChar
 137               	.Lscope2:
 138               		.stabs	"",36,0,0,.Lscope2-.LFBB2
 139               		.stabd	78,0,0
 140               		.section	.rodata.str1.1,"aMS",@progbits,1
 141               	.LC0:
 142 0000 2532 692E 		.string	"%2i.%02i\n"
 142      2530 3269 
 142      0A00 
 143               		.text
 144               		.stabs	"USART_Transmit:F(0,15)",36,0,23,USART_Transmit
 145               		.stabs	"num:P(6,4)",64,0,23,30
 146               	.global	USART_Transmit
 147               		.type	USART_Transmit, @function
 148               	USART_Transmit:
 149               		.stabd	46,0,0
GAS LISTING /tmp/ccqN2teK.s 			page 4


  21:USART.c       **** }
  22:USART.c       **** 
  23:USART.c       **** void USART_Transmit(uint16_t num)
  24:USART.c       **** {
 150               		.stabn	68,0,24,.LM8-.LFBB3
 151               	.LM8:
 152               	.LFBB3:
 153 0018 EF92      		push r14
 154 001a FF92      		push r15
 155 001c 0F93      		push r16
 156 001e 1F93      		push r17
 157 0020 CF93      		push r28
 158 0022 DF93      		push r29
 159 0024 CDB7      		in r28,__SP_L__
 160 0026 DEB7      		in r29,__SP_H__
 161 0028 2A97      		sbiw r28,10
 162 002a 0FB6      		in __tmp_reg__,__SREG__
 163 002c F894      		cli
 164 002e DEBF      		out __SP_H__,r29
 165 0030 0FBE      		out __SREG__,__tmp_reg__
 166 0032 CDBF      		out __SP_L__,r28
 167               	/* prologue: function */
 168               	/* frame size = 10 */
 169               	/* stack size = 16 */
 170               	.L__stack_usage = 16
 171 0034 FC01      		movw r30,r24
  25:USART.c       **** 	int wholeNum = num/100;
 172               		.stabn	68,0,25,.LM9-.LFBB3
 173               	.LM9:
 174 0036 64E6      		ldi r22,lo8(100)
 175 0038 70E0      		ldi r23,0
 176 003a 00D0      		rcall __udivmodhi4
  26:USART.c       **** 	uint16_t fraction = num - wholeNum*100;
 177               		.stabn	68,0,26,.LM10-.LFBB3
 178               	.LM10:
 179 003c 4CE9      		ldi r20,lo8(-100)
 180 003e 4603      		mulsu r20,r22
 181 0040 9001      		movw r18,r0
 182 0042 479F      		mul r20,r23
 183 0044 300D      		add r19,r0
 184 0046 1124      		clr __zero_reg__
 185 0048 2E0F      		add r18,r30
 186 004a 3F1F      		adc r19,r31
  27:USART.c       **** 	
  28:USART.c       **** 	unsigned char b [10];
  29:USART.c       **** 	sprintf(b,"%2i.%02i\n",wholeNum,fraction);
 187               		.stabn	68,0,29,.LM11-.LFBB3
 188               	.LM11:
 189 004c 3F93      		push r19
 190 004e 2F93      		push r18
 191 0050 7F93      		push r23
 192 0052 6F93      		push r22
 193 0054 80E0      		ldi r24,lo8(.LC0)
 194 0056 90E0      		ldi r25,hi8(.LC0)
 195 0058 9F93      		push r25
 196 005a 8F93      		push r24
 197 005c 8E01      		movw r16,r28
GAS LISTING /tmp/ccqN2teK.s 			page 5


 198 005e 0F5F      		subi r16,-1
 199 0060 1F4F      		sbci r17,-1
 200 0062 1F93      		push r17
 201 0064 0F93      		push r16
 202 0066 00D0      		rcall sprintf
  23:USART.c       **** void USART_Transmit(uint16_t num)
 203               		.stabn	68,0,23,.LM12-.LFBB3
 204               	.LM12:
 205 0068 7E01      		movw r14,r28
 206 006a 85E1      		ldi r24,21
 207 006c E80E      		add r14,r24
 208 006e F11C      		adc r15,__zero_reg__
 209 0070 0FB6      		in __tmp_reg__,__SREG__
 210 0072 F894      		cli
 211 0074 DEBF      		out __SP_H__,r29
 212 0076 0FBE      		out __SREG__,__tmp_reg__
 213 0078 CDBF      		out __SP_L__,r28
 214               	.L10:
  30:USART.c       **** 
  31:USART.c       **** 	unsigned char i;
  32:USART.c       **** 
  33:USART.c       **** 	for(i=0;i<20;i++)
  34:USART.c       **** 	{
  35:USART.c       **** 		if(!b[i]) break;
 215               		.stabn	68,0,35,.LM13-.LFBB3
 216               	.LM13:
 217 007a F801      		movw r30,r16
 218 007c 8191      		ld r24,Z+
 219 007e 8F01      		movw r16,r30
 220 0080 8823      		tst r24
 221 0082 01F0      		breq .L8
  36:USART.c       **** 		USART_TransmitChar(b[i]);
 222               		.stabn	68,0,36,.LM14-.LFBB3
 223               	.LM14:
 224 0084 00D0      		rcall USART_TransmitChar
  33:USART.c       **** 	for(i=0;i<20;i++)
 225               		.stabn	68,0,33,.LM15-.LFBB3
 226               	.LM15:
 227 0086 0E15      		cp r16,r14
 228 0088 1F05      		cpc r17,r15
 229 008a 01F4      		brne .L10
 230               	.L8:
 231               	/* epilogue start */
  37:USART.c       **** 	}
  38:USART.c       **** }
 232               		.stabn	68,0,38,.LM16-.LFBB3
 233               	.LM16:
 234 008c 2A96      		adiw r28,10
 235 008e 0FB6      		in __tmp_reg__,__SREG__
 236 0090 F894      		cli
 237 0092 DEBF      		out __SP_H__,r29
 238 0094 0FBE      		out __SREG__,__tmp_reg__
 239 0096 CDBF      		out __SP_L__,r28
 240 0098 DF91      		pop r29
 241 009a CF91      		pop r28
 242 009c 1F91      		pop r17
 243 009e 0F91      		pop r16
GAS LISTING /tmp/ccqN2teK.s 			page 6


 244 00a0 FF90      		pop r15
 245 00a2 EF90      		pop r14
 246 00a4 0895      		ret
 247               		.size	USART_Transmit, .-USART_Transmit
 248               		.stabs	"b:(0,16)=ar(0,17)=r(0,17);0;0177777;;0;9;(0,11)",128,0,28,1
 249               		.stabn	192,0,0,.LFBB3-.LFBB3
 250               		.stabn	224,0,0,.Lscope3-.LFBB3
 251               	.Lscope3:
 252               		.stabs	"",36,0,0,.Lscope3-.LFBB3
 253               		.stabd	78,0,0
 254               		.stabs	"",100,0,0,.Letext0
 255               	.Letext0:
 256               		.ident	"GCC: (GNU) 4.7.2"
 257               	.global __do_copy_data
GAS LISTING /tmp/ccqN2teK.s 			page 7


DEFINED SYMBOLS
                            *ABS*:0000000000000000 USART.c
     /tmp/ccqN2teK.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccqN2teK.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccqN2teK.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccqN2teK.s:5      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccqN2teK.s:6      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccqN2teK.s:85     .text:0000000000000000 USART_Initialize
     /tmp/ccqN2teK.s:118    .text:0000000000000010 USART_TransmitChar
     /tmp/ccqN2teK.s:148    .text:0000000000000018 USART_Transmit

UNDEFINED SYMBOLS
__udivmodhi4
sprintf
__do_copy_data
